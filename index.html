<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Predator Bumi - Solo & Upgrade</title>
    <style>
        :root { --red: #ff4444; --bg: #0a0a0a; }
        body { margin: 0; background: var(--bg); color: white; font-family: sans-serif; text-align: center; overflow-x: hidden; }
        
        /* Stats & Header */
        .header { padding: 20px; background: linear-gradient(to bottom, #300, #000); border-bottom: 1px solid var(--red); }
        .stats-container { display: flex; justify-content: space-around; margin: 15px 0; font-weight: bold; }
        .stat-box { background: #1a1a1a; padding: 10px; border-radius: 10px; width: 40%; border: 1px solid #333; }
        .stat-box small { font-size: 0.6rem; color: #888; display: block; margin-bottom: 5px; }
        
        /* Bumi & Animation */
        .earth-container { height: 250px; display: flex; align-items: center; justify-content: center; position: relative; }
        #earthImg { width: 180px; transition: transform 0.05s; z-index: 2; }
        
        .dmg-text { position: absolute; color: var(--red); font-weight: 900; animation: float 0.6s forwards; pointer-events: none; z-index: 10; }
        @keyframes float { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-100px); } }

        .shake { animation: shakeAnim 0.1s infinite; }
        @keyframes shakeAnim { 0% { transform: translate(2px,2px); } 50% { transform: translate(-2px,-2px); } 100% { transform: translate(2px,-2px); } }

        /* Buttons & Upgrades */
        .btn-main { width: 80%; padding: 15px; font-size: 1.2rem; font-weight: 900; background: var(--red); color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 4px #600; margin-bottom: 20px; }
        .btn-main:active { transform: translateY(2px); box-shadow: 0 2px #200; }
        
        .upgrade-section { padding: 10px; background: #111; border-radius: 20px 20px 0 0; min-height: 200px; }
        .upgrade-card { display: flex; justify-content: space-between; align-items: center; background: #1a1a1a; padding: 12px; margin: 8px; border-radius: 12px; border-left: 4px solid var(--red); }
        .up-info b { display: block; font-size: 0.9rem; }
        .up-info small { font-size: 0.7rem; color: #888; }
        .btn-buy { background: #333; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 0.8rem; }
        .btn-buy:disabled { opacity: 0.3; }

        /* Modal Tutorial */
        #modalHelp { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:1000; align-items:center; justify-content:center; padding:20px; }
        .modal-content { background:#111; border:1px solid var(--red); padding:20px; border-radius:15px; max-width:300px; text-align:left; }
    </style>
</head>
<body>

<div class="header">
    <small>POPULASI TERSISA</small>
    <h1 id="popDisplay" style="margin:5px 0; color:var(--red); font-size:2.2rem;">8.000.000.000</h1>
    <div class="stats-container">
        <div class="stat-box"><small>KANTONG POIN</small>üí∞ <span id="scoreDisplay">0</span></div>
        <div class="stat-box"><small>POWER GIGI</small>ü¶∑ <span id="powerDisplay">1</span></div>
    </div>
</div>

<div class="earth-container" id="stage">
    <img src="https://upload.wikimedia.org/wikipedia/commons/2/22/Earth_Western_Hemisphere_transparent_background.png" id="earthImg">
</div>

<button class="btn-main" id="btnHit">GIGIT BUMI!</button>

<div style="margin-bottom: 15px;">
    <button onclick="document.getElementById('modalHelp').style.display='flex'" style="background:none; border:1px solid #333; color:#555; padding:5px 15px; border-radius:20px; font-size:0.7rem;">CARA MAIN & INFO</button>
</div>

<div class="upgrade-section">
    <div class="upgrade-card">
        <div class="up-info"><b>ü¶∑ Gigi Predator</b><small>Tambah power gigitan (+1)</small></div>
        <button class="btn-buy" id="buyGigi">Beli: 50</button>
    </div>
    <div class="upgrade-card">
        <div class="up-info"><b>ü¶† Virus AFK</b><small>Makan otomatis (+1/detik)</small></div>
        <button class="btn-buy" id="buyVirus">Beli: 100</button>
    </div>
    <div style="padding: 20px;">
        <a href="multiplayer.html" style="color:var(--red); text-decoration:none; font-weight:bold; font-size:0.9rem;">üåç MASUK WORLD RAID (MULTIPLAYER) ‚Üí</a>
    </div>
</div>

<div id="modalHelp">
    <div class="modal-content">
        <h3>üìñ Cara Main</h3>
        <p style="font-size:0.8rem; color:#aaa; line-height:1.4;">
            1. Klik tombol <b>GIGIT</b> untuk makan penduduk secara manual.<br>
            2. <b>POIN</b> akan bertambah setiap kali penduduk berkurang.<br>
            3. Gunakan poin untuk <b>UPGRADE</b> Gigi (Manual) atau Virus (AFK).<br>
            4. Virus akan tetap bekerja memberimu poin selama web ini terbuka.<br><br>
            <i>*Game ini hanya menyimpan nama untuk leaderboard. Aman!</i>
        </p>
        <button onclick="document.getElementById('modalHelp').style.display='none'" style="width:100%; padding:10px; background:var(--red); color:white; border:none; border-radius:8px; font-weight:bold;">Siaapp!</button>
    </div>
</div>

<script>
    // Inisialisasi Data dari LocalStorage
    let pop = parseInt(localStorage.getItem('pop')) || 8000000000;
    let score = parseInt(localStorage.getItem('score')) || 0;
    let power = parseInt(localStorage.getItem('power')) || 1;
    let virus = parseInt(localStorage.getItem('virus')) || 0;

    const popDisplay = document.getElementById('popDisplay');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const powerDisplay = document.getElementById('powerDisplay');
    const earthImg = document.getElementById('earthImg');

    function updateUI() {
        popDisplay.innerText = pop.toLocaleString('id-ID');
        scoreDisplay.innerText = score.toLocaleString('id-ID');
        powerDisplay.innerText = power.toLocaleString('id-ID');
        
        document.getElementById('buyGigi').innerText = "Beli: " + (power * 50);
        document.getElementById('buyVirus').innerText = "Beli: " + ((virus + 1) * 100);
        
        document.getElementById('buyGigi').disabled = score < (power * 50);
        document.getElementById('buyVirus').disabled = score < ((virus + 1) * 100);
    }

    function saveGame() {
        localStorage.setItem('pop', pop);
        localStorage.setItem('score', score);
        localStorage.setItem('power', power);
        localStorage.setItem('virus', virus);
        localStorage.setItem('last_power', power); // Buat multiplayer
    }

    function spawnDmg(val) {
        const d = document.createElement('div');
        d.className = 'dmg-text'; d.innerText = "-"+val;
        d.style.left = (window.innerWidth/2 + (Math.random()*40-20)) + "px";
        d.style.top = "40%";
        document.body.appendChild(d);
        setTimeout(() => d.remove(), 600);
    }

    // GIGIT MANUAL
    document.getElementById('btnHit').onclick = () => {
        pop -= power;
        score += power; // Tambah poin
        spawnDmg(power);
        
        earthImg.classList.add('shake');
        setTimeout(() => earthImg.classList.remove('shake'), 100);
        
        updateUI();
        saveGame();
    };

    // LOGIKA AFK (VIRUS) - INI YANG BIKIN CUAN PAS AFK!
    setInterval(() => {
        if (virus > 0 && pop > 0) {
            pop -= virus;
            score += virus; // <--- POIN MASUK DISINI PAS AFK
            if (pop < 0) pop = 0;
            
            updateUI();
            saveGame();
        }
    }, 1000);

    // UPGRADE GIGI
    document.getElementById('buyGigi').onclick = () => {
        let cost = power * 50;
        if (score >= cost) {
            score -= cost;
            power++;
            updateUI();
            saveGame();
        }
    };

    // UPGRADE VIRUS
    document.getElementById('buyVirus').onclick = () => {
        let cost = (virus + 1) * 100;
        if (score >= cost) {
            score -= cost;
            virus++;
            updateUI();
            saveGame();
        }
    };

    updateUI();
</script>

</body>
</html>
