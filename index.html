<script>
    let totalTaps = parseInt(localStorage.getItem('total_taps')) || 0; // Counter buat bonus 1000
    let score = parseInt(localStorage.getItem('total_score')) || 0;
    
    // ... (kode sfx, bgm, dan ban tetap sama) ...

    function updateRank() {
        let r = "Newbie";
        let color = "#f8fafc"; // Warna default

        if (score >= 1000) r = "Pro";
        if (score >= 3000) r = "Elite";
        if (score >= 5000) { 
            r = "Aurum"; // Nama emas yang elegan
            color = "#ffd700"; // Kuning emas halus
        }
        if (score >= 10000) r = "Godlike";

        const rankEl = document.getElementById('rank');
        rankEl.innerText = r;
        rankEl.style.color = color;
    }

    document.getElementById('consumeBtn').onclick = () => {
        if (isExhausted) return;
        
        // Suara & Score
        sfx.currentTime = 0;
        sfx.play();
        
        score++;
        totalTaps++; // Tambah counter tap untuk bonus
        spamCounter++;

        // CEK BONUS TIAP 1000 TAP
        if (totalTaps >= 1000) {
            score += 10; // Bonus 10k (atau 10 poin sesuai request)
            totalTaps = 0; // Reset counter bonus
            showBonusAnim(); // Munculin notif kecil
        }

        scoreEl.innerText = score.toLocaleString(); // Pake separator ribuan biar rapi
        localStorage.setItem('total_score', score);
        localStorage.setItem('total_taps', totalTaps);
        updateRank();

        // ... (Logika Ban 24 jam tetap ada di bawah sini) ...
        if (spamCounter > 90) {
            handleOverheat();
        }
    };

    function showBonusAnim() {
        const bonusTxt = document.createElement('div');
        bonusTxt.innerText = "+10 BONUS ENERGY!";
        bonusTxt.style.cssText = "position:fixed; top:20%; color:#38bdf8; font-weight:bold; animation: fadeUp 1s forwards;";
        document.body.appendChild(bonusTxt);
        setTimeout(() => bonusTxt.remove(), 1000);
    }
</script>

<style>
    /* Animasi Notif Bonus */
    @keyframes fadeUp {
        0% { opacity: 1; transform: translateY(0); }
        100% { opacity: 0; transform: translateY(-50px); }
    }
    
    /* Glow effect buat skor */
    #score {
        text-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        font-family: 'Courier New', Courier, monospace;
    }
</style>
